<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Jersey+10&display=swap"
      rel="stylesheet"
    />
    <title>Pokedex</title>
    <link rel="stylesheet" href="../css/list_crawl.css" />
  </head>
  <body>
    <nav>
      <a href="../index.html" class="back-button"></a>
      <h1>Pokedex</h1>
      <div class="center-container">
        <form action="/list-items" method="get">
          <input
            type="text"
            id="searchInput"
            name="query"
            placeholder="Search with Regex"
          />
          <button class="style_button" type="submit">Query</button>
        </form>
      </div>
      <h2>
        {% if query_text %} Searched for: {{ query_text }} {% else %} Listing
        all result {% endif %}
      </h2>
    </nav>
    <div class="card_container">
      {% if data %} {% for pokemon in data %}
      <div
        class="card"
        data-name="{{ pokemon.name|lower }}"
        onclick="openModal('{{ pokemon.Number }}')"
      >
        <img src="{{ pokemon.image }}" alt="{{ pokemon.name }}" />
        <h2>#{{ pokemon.Number }} {{ pokemon.Name }}</h2>
        <p>
          <strong>Type:</strong>
          {% for type in pokemon.Type %}
          <span class="type-badge">{{ type }}</span>
          {% endfor %}
        </p>
        <div class="stats">
          <p><strong>HP:</strong> {{ pokemon.HP or 'N/A' }}</p>
          <p><strong>Attack:</strong> {{ pokemon.Attack or 'N/A' }}</p>
          <p><strong>Defense:</strong> {{ pokemon.Defense or 'N/A' }}</p>
          <p><strong>Sp. Atk:</strong> {{ pokemon['Sp. Atk'] or 'N/A' }}</p>
          <p><strong>Sp. Def:</strong> {{ pokemon['Sp. Def'] or 'N/A' }}</p>
          <p><strong>Speed:</strong> {{ pokemon.Speed or 'N/A' }}</p>
        </div>
      </div>

      <!-- Modal for each PokÃ©mon -->
      <dialog id="modal-{{ pokemon.Number }}" class="pokemon-modal">
        <div class="modal-content">
          <button
            class="close-button"
            onclick="closeModal('{{ pokemon.Number }}')"
          >
            X
          </button>
          <img
            src="{{ pokemon.image }}"
            alt="{{ pokemon.name }}"
            class="modal-image"
          />
          <h2>#{{ pokemon.Number }} {{ pokemon.Name }}</h2>
          <div class="modal-info">
            <p><strong>Species:</strong> {{ pokemon.Species or 'N/A' }}</p>
            <p><strong>Height:</strong> {{ pokemon.Height or 'N/A' }}</p>
            <p><strong>Weight:</strong> {{ pokemon.Weight or 'N/A' }}</p>
            <p>
              <strong>Type:</strong>
              {% for type in pokemon.Type %}
              <span class="type-badge">{{ type }}</span>
              {% endfor %}
            </p>
          </div>
          <div class="modal-description">
            <p>
              <strong>Description:</strong> {{ pokemon.Description or 'N/A' }}
            </p>
          </div>
          <div class="modal-stats">
            <p><strong>HP:</strong> {{ pokemon.HP or 'N/A' }}</p>
            <p><strong>Attack:</strong> {{ pokemon.Attack or 'N/A' }}</p>
            <p><strong>Defense:</strong> {{ pokemon.Defense or 'N/A' }}</p>
            <p><strong>Sp. Atk:</strong> {{ pokemon['Sp. Atk'] or 'N/A' }}</p>
            <p><strong>Sp. Def:</strong> {{ pokemon['Sp. Def'] or 'N/A' }}</p>
            <p><strong>Speed:</strong> {{ pokemon.Speed or 'N/A' }}</p>
          </div>
        </div>
      </dialog>
      {% endfor %} {% else %}
      <h2>No Result</h2>
      {% endif %}
    </div>

    <script>
      function openModal(id) {
        const modal = document.getElementById(`modal-${id}`);
        if (modal) {
          modal.showModal();
        }
      }

      function closeModal(id) {
        const modal = document.getElementById(`modal-${id}`);
        if (modal) {
          modal.close();
        }
      }
    </script>
  </body>
</html>
